<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="#!/">
        <img src="images/logo.png" width="40" height="40" alt="logo">
    </a>
    <a class="navbar-brand" href="#!/">Crédit de l'écureuil</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div ng-if="!vm.user">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#!/">Accueil<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/register">Inscription<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/registerpro" style="color:yellow;">Inscription Pro<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/login">Connexion<span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
        <div ng-if="vm.user.isAdmin">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#!/">Accueil<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Gestion des comptes
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#!/consultation_admin">Consultation</a>
                        <a class="dropdown-item" href="#!/virement_admin">Virement</a>
                        <a class="dropdown-item" href="#!/create_account_admin">Ouvrir un nouveau livret</a>
                    </div>
                </li>
                <li class="nav-item active dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Messagerie
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="envoyer_message.htm">Envoyer un message</a>
                        <a class="dropdown-item" href="consulter_messagerie.htm">Consulter la messagerie</a>
                    </div>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/notifications">Notifications<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/disconnect">Deconnexion<span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
        <div ng-if="!vm.user.isAdmin && vm.user">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#!/">Accueil<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/profil">Profil<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Gestion des comptes
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#!/consultation">Consultation</a>
                        <a class="dropdown-item" href="#!/virement">Virement</a>
                        <a class="dropdown-item" href="#!/create_account">Ouvrir un nouveau livret</a>
                        <a class="dropdown-item" href="#!/create_linked_account">Ouvrir un compte joint</a>
                    </div>
                </li>
                <div ng-if="vm.user.isPro">
                    <li class="nav-item active">
                        <a class="nav-link" href="#!/ordre_bourse">Ordre en bourse<span class="sr-only">(current)</span></a>
                    </li>
                </div>
                <li class="nav-item active dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Messagerie
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="#!/envoyer_message">Envoyer un message</a>
                        <a class="dropdown-item" href="#!/consulter_messagerie">Consulter la messagerie</a>
                    </div>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/notifications">Notifications<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="#!/disconnect">Deconnexion<span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </div>
</nav>


<div class="container">
    <div id="login-row" class="row justify-content-center align-items-center">
        <div id="login-column" class="col-md-6">
            <div class="login-box col-md-12">
                <form id="login-form" class="form" ng-submit="vm.createLinkedAccount()" role="form">
                    <h3 class="text-center text-info">Ouverture d'un compte joint</h3>
                    <div class="form-group mb-3">
                        <label for="nom_compte" class="text-info">Livret :</label>
                        <input type="text" class="form-control" name="nom_compte" id="nom_compte" ng-model="vm.account.name" placeholder="Nom du compte" required>
                    </div>
                    <div class="form-group mb-3">
                        <label class="text-info" for="field1">Co-Proprietaires</label>
                        <div class="controls" id="profs"> 
                            <div id="field">
                                <input autocomplete="off" class="input" id="field1" name="field1" type="text"/>
                                <button id="b1" class="btn btn-primary add-more" type="button">+</button>
                                <script>
                                    $(document).ready(function(){
                                        var next = 1;
                                        $(".add-more").click(function(e){
                                            e.preventDefault();
                                            var addto = "#field" + next;
                                            var addRemove = "#field" + (next);
                                            next = next + 1;
                                            var newIn = '<input autocomplete="off" class="input" id="field' + next + '" name="field' + next + '" type="text">';
                                            var newInput = $(newIn);
                                            var removeBtn = '<button id="remove' + (next - 1) + '" class="btn btn-danger remove-me" >-</button></div><div id="field">';
                                            var removeButton = $(removeBtn);
                                            $(addto).after(newInput);
                                            $(addRemove).after(removeButton);
                                            $("#field" + next).attr('data-source',$(addto).attr('data-source'));
                                            $("#count").val(next);
                                            $('.remove-me').click(function(e){
                                                e.preventDefault();
                                                var fieldNum = this.id.charAt(this.id.length-1);
                                                var fieldID = "#field" + fieldNum;
                                                $(this).remove();
                                                $(fieldID).remove();
                                            });
                                        });
                                    });
                                </script>
                            </div>
                            <br>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="submit" ng-disabled="form.$invalid" name="Valider" class="btn btn-primary" value="Valider">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
